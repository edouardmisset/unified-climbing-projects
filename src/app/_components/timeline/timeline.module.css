.container {
  container-name: timeline;
  container-type: inline-size;
  display: flex;
  flex: 1;
}

/* Timeline core variables and layout */
.timeline {
  --size-0: 0.5rem;
  --size-1: 1rem;
  --size-2: 2rem;
  --gap: 2rem;
  --line-width: 2px;
  --background: var(--surface-1, light-dark(white, black));
  --text: var(--text-1, light-dark(black, white));
  --timeline-direction: column;
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: var(--timeline-direction);
  gap: var(--gap);
  padding: 0;
  margin: 0;
  list-style: none;

  /* Container query: large containers default to horizontal */
  @container timeline (width > 40rem) {
    --timeline-direction: row;
  }
}

/* Event styles */
.event {
  position: relative;
  padding: 0;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    z-index: -2;
    background: var(--text);
    inline-size: var(--line-width);
    block-size: 150%;
  }

  &::after {
    content: '';
    position: absolute;
    z-index: -1;
    inset-block-start: calc(var(--size-1) / 2);
    inset-inline-start: calc(var(--size-1) / -2 + var(--line-width) / 2);
    inline-size: var(--size-1);
    block-size: var(--size-1);
    outline: var(--size-1) solid var(--background);
    background: var(--text);
    transform: rotate(45deg);
  }

  @container timeline (width > 40rem) {
    &::before {
      inline-size: 150%;
      block-size: var(--line-width);
    }

    &::after {
      inset: 0;
      inset-block-start: calc(var(--size-1) / -2 + var(--line-width) / 2);
      inset-inline-start: 50%;
    }
  }
}

/* Body styles */
.body {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: var(--size-1);
  padding-inline-start: var(--size-2);

  @container timeline (width > 40rem) {
    && {
      padding-inline-start: 0;
      padding-block-start: var(--size-2);
    }
  }
}

.date {
  color: var(--background);
  background-color: var(--text);
  inline-size: fit-content;
  align-self: center;
}
